<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartPick ‚Äì Ti√™u d√πng th√¥ng minh</title>
    <!-- Th∆∞ vi·ªán Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Th∆∞ vi·ªán Chart.js ƒë·ªÉ v·∫Ω bi·ªÉu ƒë·ªì -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts: Poppins cho font ch·ªØ hi·ªán ƒë·∫°i -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- C√°c th∆∞ vi·ªán Firebase cho c∆° s·ªü d·ªØ li·ªáu -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, collection, addDoc, onSnapshot, query, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // T·∫°o c√°c bi·∫øn global ƒë·ªÉ c√°c script kh√°c c√≥ th·ªÉ s·ª≠ d·ª•ng
        window.firebase = {
            initializeApp,
            getAuth,
            signInAnonymously,
            signInWithCustomToken,
            getFirestore,
            doc,
            getDoc,
            setDoc,
            collection,
            addDoc,
            onSnapshot,
            query,
            getDocs
        };
    </script>
    <style>
        body, h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
        }
        html {
            scroll-behavior: smooth;
        }
        .section-container {
            min-height: 100vh;
        }
        nav a:hover {
            transform: translateY(-2px);
            transition: transform 0.2s ease-in-out;
        }
        .card {
            transition: all 0.3s ease-in-out;
            opacity: 0;
            transform: translateY(20px);
        }
        .card.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .quiz-btn {
            transition: all 0.3s ease-in-out;
            transform: scale(1);
        }
        .quiz-btn:hover {
            transform: scale(1.05);
        }
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
        .dismiss-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            line-height: 1;
            color: #b45309; /* M√†u cam ƒë·∫≠m */
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        .dismiss-btn:hover {
            opacity: 1;
        }
        /* CSS cho m√¥ h√¨nh 3D */
        #threed-container {
            position: relative;
            width: 100%;
            height: 80vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }
        #threed-container canvas {
            display: block;
        }
        .threed-ui-panel {
            position: absolute;
            top: 1rem;
            text-align: center;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>

    <!-- Thanh ƒëi·ªÅu h∆∞·ªõng (Navigation Bar) -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex flex-col sm:flex-row justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-900">Nghi√™n C·ª©u</a>
            <div class="mt-4 sm:mt-0 space-x-2 sm:space-x-4 flex justify-center overflow-x-auto whitespace-nowrap">
                <a href="#home" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">Trang ch·ªß</a>
                <a href="#foreword" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">L·ªùi n√≥i ƒë·∫ßu</a>
                <a href="#abstract" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">T√≥m t·∫Øt</a>
                <a href="#results" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">K·∫øt qu·∫£</a>
                <a href="#guide" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">C·∫©m nang</a>
                <a href="#3d-experience" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">Tr·∫£i nghi·ªám 3D</a>
                <a href="#quiz" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">Quizz</a>
                <a href="#references" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">T√†i li·ªáu tham kh·∫£o</a>
                <a href="#acknowledgements" class="text-gray-600 hover:text-blue-600 transition-colors duration-300 font-semibold">C·∫£m ∆°n</a>
            </div>
        </div>
    </nav>
    
    <!-- Banner th√¥ng b√°o b·∫£n th·ª≠ nghi·ªám -->
    <div id="trial-banner" class="bg-amber-100 text-amber-800 p-3 text-center text-sm sm:text-base font-semibold flex items-center justify-center">
        <p>‚ö†Ô∏è ƒê√¢y l√† b·∫£n th·ª≠ nghi·ªám. D·ª± ki·∫øn ho√†n th√†nh v√†o th√°ng 10 nƒÉm 2025.</p>
        <button id="dismiss-banner-btn" class="dismiss-btn ml-4">&times;</button>
    </div>

    <!-- Ph·∫ßn Trang ch·ªß (Home) -->
    <section id="home" class="section-container container mx-auto px-4 py-16 flex flex-col items-center justify-center bg-blue-50 rounded-lg shadow-lg my-8">
        <div class="text-center max-w-4xl">
            <h1 class="text-5xl font-extrabold text-blue-900 mb-4">SmartPick ‚Äì Ti√™u d√πng th√¥ng minh</h1>
            <h2 class="text-3xl font-bold text-gray-800 mb-4">"Ph√¢n t√≠ch t√°c ƒë·ªông c·ªßa th·ªã gi√°c tr∆∞·ªõc s·ª± phong ph√∫ c·ªßa bao b√¨ s·∫£n ph·∫©m v√† th√¥ng ƒëi·ªáp marketing ƒë·∫øn ƒë·ªãnh h∆∞·ªõng ti√™u d√πng c·ªßa h·ªçc sinh THPT ·ªü m·ªôt s·ªë tr∆∞·ªùng thu·ªôc khu v·ª±c Ph∆∞·ªùng Ch√¢u ƒê·ªëc, Ph∆∞·ªùng Vƒ©nh T·∫ø, Ph∆∞·ªùng T√¢n Ch√¢u v√† X√£ Ch√¢u Phong."</h2>
            <p class="text-lg text-gray-700 leading-relaxed">
                T√°c gi·∫£: Nguy·ªÖn Ch√≠ C√¥ng | L·ªõp: 12XH3 | Tr∆∞·ªùng: THPT Ch√¢u Th·ªã T·∫ø
            </p>
        </div>
        <!-- Video YouTube ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
        <div class="mt-8 w-full max-w-2xl mx-auto rounded-lg overflow-hidden shadow-lg">
            <iframe class="w-full aspect-video" src="https://www.youtube.com/embed/79yKgrrp48Y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>
    </section>

    <!-- Ph·∫ßn L·ªùi n√≥i ƒë·∫ßu (Foreword) -->
    <section id="foreword" class="section-container container mx-auto px-4 py-16 my-8">
        <div class="bg-white p-8 rounded-lg shadow-lg card">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">L·ªùi n√≥i ƒë·∫ßu</h2>
            <p class="text-gray-700 leading-relaxed">
Trong b·ªëi c·∫£nh th·ªã tr∆∞·ªùng ti√™u d√πng ng√†y c√†ng ƒëa d·∫°ng, c√°c y·∫øu t·ªë th·ªã gi√°c t·ª´ bao b√¨ s·∫£n ph·∫©m v√† th√¥ng ƒëi·ªáp marketing ƒë√≥ng vai tr√≤ then ch·ªët trong vi·ªác thu h√∫t v√† ƒë·ªãnh h√¨nh h√†nh vi mua s·∫Øm, ƒë·∫∑c bi·ªát l√† v·ªõi l·ª©a tu·ªïi h·ªçc sinh THPT. ƒê√¢y l√† nh√≥m ƒë·ªëi t∆∞·ª£ng nƒÉng ƒë·ªông, d·ªÖ b·ªã ·∫£nh h∆∞·ªüng b·ªüi xu h∆∞·ªõng v√† c√°c y·∫øu t·ªë c·∫£m x√∫c.

Tuy nhi√™n, t·∫°i c√°c khu v·ª±c ph∆∞·ªùng Ch√¢u ƒê·ªëc, Vƒ©nh T·∫ø, ph∆∞·ªùng T√¢n Ch√¢u v√† x√£ Ch√¢u Phong, v·∫´n c√≤n thi·∫øu c√°c nghi√™n c·ª©u chuy√™n s√¢u v·ªÅ t√°c ƒë·ªông c·ª• th·ªÉ c·ªßa c√°c y·∫øu t·ªë n√†y. Vi·ªác thi·∫øu d·ªØ li·ªáu ƒë√£ g√¢y ra kh√≥ khƒÉn cho ph·ª• huynh v√† nh√† tr∆∞·ªùng trong vi·ªác ƒë·ªãnh h∆∞·ªõng ti√™u d√πng cho h·ªçc sinh.

V√¨ l√Ω do ƒë√≥, nghi√™n c·ª©u n√†y ƒë∆∞·ª£c th·ª±c hi·ªán nh·∫±m ph√¢n t√≠ch t√°c ƒë·ªông c·ªßa th·ªã gi√°c tr∆∞·ªõc s·ª± phong ph√∫ c·ªßa bao b√¨ s·∫£n ph·∫©m v√† th√¥ng ƒëi·ªáp marketing ƒë·∫øn ƒë·ªãnh h∆∞·ªõng ti√™u d√πng c·ªßa h·ªçc sinh THPT t·∫°i c√°c khu v·ª±c n√™u tr√™n. K·∫øt qu·∫£ nghi√™n c·ª©u k·ª≥ v·ªçng s·∫Ω cung c·∫•p m·ªôt c√°i nh√¨n to√†n di·ªán v√† th·ª±c t·∫ø, t·ª´ ƒë√≥ ƒë∆∞a ra c√°c ƒë·ªÅ xu·∫•t h·ªØu √≠ch cho ph·ª• huynh v√† nh√† tr∆∞·ªùng, g√≥p ph·∫ßn gi√°o d·ª•c v√† th√∫c ƒë·∫©y m·ªôt th·∫ø h·ªá ng∆∞·ªùi ti√™u d√πng tr·∫ª c√≥ √Ω th·ª©c v√† tr√°ch nhi·ªám h∆°n.            </p>
        </div>
    </section>

    <!-- Ph·∫ßn T√≥m t·∫Øt (Abstract) -->
    <section id="abstract" class="section-container container mx-auto px-4 py-16 my-8">
        <div class="bg-white p-8 rounded-lg shadow-lg card">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">T√≥m t·∫Øt</h2>
            <p class="text-gray-700 leading-relaxed">
Trong b·ªëi c·∫£nh th·ªã tr∆∞·ªùng ti√™u d√πng ng√†y c√†ng ƒëa d·∫°ng, c√°c y·∫øu t·ªë th·ªã gi√°c t·ª´ bao b√¨ s·∫£n ph·∫©m v√† th√¥ng ƒëi·ªáp marketing ƒë√≥ng vai tr√≤ then ch·ªët trong vi·ªác ƒë·ªãnh h√¨nh h√†nh vi mua s·∫Øm c·ªßa gi·ªõi tr·∫ª. Nghi√™n c·ª©u n√†y ƒë∆∞·ª£c th·ª±c hi·ªán nh·∫±m ph√¢n t√≠ch m·ªôt c√°ch c√≥ h·ªá th·ªëng m·ª©c ƒë·ªô ·∫£nh h∆∞·ªüng c·ªßa c√°c y·∫øu t·ªë tr√™n ƒë·∫øn ƒë·ªãnh h∆∞·ªõng ti√™u d√πng c·ªßa h·ªçc sinh THPT t·∫°i c√°c khu v·ª±c ph∆∞·ªùng Ch√¢u ƒê·ªëc, Vƒ©nh T·∫ø, T√¢n Ch√¢u v√† x√£ Ch√¢u Phong.

S·ª≠ d·ª•ng ph∆∞∆°ng ph√°p kh·∫£o s√°t ƒë·ªãnh l∆∞·ª£ng v√† ƒë·ªãnh l∆∞·ª£ng, ƒë·ªÅ t√†i k·ª≥ v·ªçng s·∫Ω l√†m r√µ m·ªëi li√™n h·ªá gi·ªØa c√°c y·∫øu t·ªë th·ªã gi√°c v·ªõi quy·∫øt ƒë·ªãnh mua s·∫Øm c·ªßa h·ªçc sinh. K·∫øt qu·∫£ nghi√™n c·ª©u kh√¥ng ch·ªâ cung c·∫•p m·ªôt c√°i nh√¨n th·ª±c t·∫ø v·ªÅ th√≥i quen ti√™u d√πng c·ªßa gi·ªõi tr·∫ª t·∫°i ƒë·ªãa ph∆∞∆°ng, m√† c√≤n l√† c∆° s·ªü ƒë·ªÉ ƒë∆∞a ra c√°c ƒë·ªÅ xu·∫•t thi·∫øt th·ª±c cho ph·ª• huynh v√† nh√† tr∆∞·ªùng, nh·∫±m gi√°o d·ª•c v√† ƒë·ªãnh h∆∞·ªõng h·ªçc sinh tr·ªü th√†nh nh·ªØng ng∆∞·ªùi ti√™u d√πng th√¥ng minh v√† c√≥ tr√°ch nhi·ªám.            </p>
        </div>
    </section>

    <!-- Ph·∫ßn K·∫øt qu·∫£ kh·∫£o s√°t (Results) - ƒê√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t v·ªõi bi·ªÉu ƒë·ªì -->
    <section id="results" class="section-container container mx-auto px-4 py-16 my-8">
        <div class="bg-white p-8 rounded-lg shadow-lg text-center card">
            <h2 class="text-3xl font-bold text-gray-900 mb-8">K·∫øt qu·∫£ Nghi√™n c·ª©u ƒê·ªãnh l∆∞·ª£ng</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-8">
                D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë ph√¢n t√≠ch ban ƒë·∫ßu. Bi·ªÉu ƒë·ªì s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t v·ªõi d·ªØ li·ªáu th·ª±c t·∫ø sau khi ho√†n th√†nh kh·∫£o s√°t v√†o th√°ng 10 nƒÉm 2025.
            </p>
            
            <div class="grid md:grid-cols-2 gap-8 mt-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">M·ª©c ƒë·ªô ·∫£nh h∆∞·ªüng c·ªßa c√°c y·∫øu t·ªë th·ªã gi√°c</h3>
                    <div class="chart-container mx-auto">
                        <canvas id="visualImpactChart"></canvas>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">T·ª∑ l·ªá h·ªçc sinh b·ªã ·∫£nh h∆∞·ªüng b·ªüi Th√¥ng ƒëi·ªáp</h3>
                    <div class="chart-container mx-auto">
                        <canvas id="marketingMessageChart"></canvas>
                    </div>
                </div>
            </div>
            
            <p class="text-gray-700 leading-relaxed mt-8 italic">
                C√°c bi·ªÉu ƒë·ªì tr√™n hi·ªán ƒëang hi·ªÉn th·ªã d·ªØ li·ªáu b·∫±ng 0 v√† s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t sau.
            </p>
        </div>
    </section>
    
    <!-- Ph·∫ßn C·∫©m nang ƒë·ªãnh h∆∞·ªõng ti√™u d√πng - ƒê√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√™m link -->
    <section id="guide" class="section-container container mx-auto px-4 py-16 my-8">
        <div class="bg-white p-8 rounded-lg shadow-lg card">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">C·∫©m nang ƒê·ªãnh h∆∞·ªõng Ti√™u d√πng Th√¥ng minh</h2>
            <div class="text-center mb-8">
                <a href="https://drive.google.com/file/d/1LhjmVUxPCUpideFYpq08YBpUOvjki-Ta/view?usp=drive_link" target="_blank" rel="noopener noreferrer" class="inline-block bg-blue-600 text-white px-6 py-3 rounded-full text-lg font-bold hover:bg-blue-700 transition-colors duration-300 shadow-md quiz-btn">
                    NH·∫§N V√ÄY ƒê√ÇY ƒê·ªÇ T·∫¢I B·ªò C·∫®M NANG ƒê·ªäNH H∆Ø·ªöNG TI√äU D√ôNG
                </a>
            </div>
            <div class="space-y-8">
                <div class="guide-item">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">1. Ph√¢n bi·ªát "C·∫ßn" v√† "Mu·ªën"</h3>
                    <p class="text-gray-700 leading-relaxed">
                        H√£y t·ª± h·ªèi: "M√¨nh c√≥ th·ª±c s·ª± c·∫ßn s·∫£n ph·∫©m n√†y kh√¥ng?" tr∆∞·ªõc khi mua s·∫Øm. Vi·ªác ph√¢n bi·ªát r√µ r√†ng gi·ªØa nhu c·∫ßu thi·∫øt y·∫øu v√† mong mu·ªën nh·∫•t th·ªùi s·∫Ω gi√∫p b·∫°n tr√°nh mua s·∫Øm l√£ng ph√≠.
                    </p>
                </div>
                <div class="guide-item">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">2. ƒê·ªçc k·ªπ bao b√¨ v√† th√†nh ph·∫ßn</h3>
                    <p class="text-gray-700 leading-relaxed">
                        ƒê·ª´ng ch·ªâ b·ªã thu h√∫t b·ªüi v·∫ª ngo√†i b·∫Øt m·∫Øt. H√£y d√†nh th·ªùi gian ƒë·ªçc nh√£n m√°c, th√†nh ph·∫ßn, v√† h·∫°n s·ª≠ d·ª•ng ƒë·ªÉ ƒë·∫£m b·∫£o s·∫£n ph·∫©m an to√†n v√† ph√π h·ª£p v·ªõi nhu c·∫ßu c·ªßa b·∫°n.
                    </p>
                </div>
                <div class="guide-item">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">3. So s√°nh gi√° v√† ch·∫•t l∆∞·ª£ng</h3>
                    <p class="text-gray-700 leading-relaxed">
                        Tr∆∞·ªõc khi ƒë∆∞a ra quy·∫øt ƒë·ªãnh, h√£y t√¨m hi·ªÉu v√† so s√°nh gi√° c·∫£, ƒë√°nh gi√° ch·∫•t l∆∞·ª£ng t·ª´ nhi·ªÅu ngu·ªìn kh√°c nhau. S·ª≠ d·ª•ng c√°c ·ª©ng d·ª•ng so s√°nh gi√° ƒë·ªÉ t√¨m ƒë∆∞·ª£c l·ª±a ch·ªçn t·ªëi ∆∞u nh·∫•t.
                    </p>
                </div>
                <div class="guide-item">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">4. L√™n k·∫ø ho·∫°ch chi ti√™u</h3>
                    <p class="text-gray-700 leading-relaxed">
                        Qu·∫£n l√Ω t√†i ch√≠nh c√° nh√¢n hi·ªáu qu·∫£ b·∫±ng c√°ch l·∫≠p danh s√°ch nh·ªØng m√≥n ƒë·ªì c·∫ßn mua v√† ƒë·∫∑t ra ng√¢n s√°ch c·ª• th·ªÉ. ƒêi·ªÅu n√†y gi√∫p b·∫°n ki·ªÉm so√°t chi ti√™u v√† tr√°nh b·ªã "ch√°y t√∫i".
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Ph·∫ßn Tr·∫£i nghi·ªám 3D m·ªõi -->
    <section id="3d-experience" class="section-container container mx-auto px-4 py-16 my-8">
        <div class="bg-white p-8 rounded-lg shadow-lg text-center card">
            <h2 class="text-3xl font-bold text-gray-900 mb-8">Tr·∫£i nghi·ªám Lon N∆∞·ªõc D·ª´a 3D</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-8">
                H√£y c√πng kh√°m ph√° m√¥ h√¨nh lon n∆∞·ªõc d·ª´a "Coconut Bliss" v·ªõi thi·∫øt k·∫ø m·ªõi!
            </p>
            <div id="threed-container" class="relative">
                <div class="threed-ui-panel">
                    <h3 class="text-xl font-bold text-gray-900">Lon N∆∞·ªõc D·ª´a 360¬∞</h3>
                    <p class="text-md text-gray-700">D√πng chu·ªôt ho·∫∑c ng√≥n tay ƒë·ªÉ xoay m√¥ h√¨nh!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Ph·∫ßn Quizz c√¢u ƒë·ªë vui - ƒê√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t v·ªõi Firestore -->
    <section id="quiz" class="section-container container mx-auto px-4 py-16 my-8 flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl card">
            <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">Quizz Vui: B·∫°n Hi·ªÉu Gen Z ƒê·∫øn ƒê√¢u?</h2>
            <div id="user-info" class="mb-4 text-center text-sm text-gray-500 hidden">
                <p>ID Ng∆∞·ªùi d√πng: <span id="user-id-display" class="font-mono"></span></p>
            </div>
            <div id="quiz-container" class="space-y-6">
                <!-- N·ªôi dung quiz s·∫Ω ƒë∆∞·ª£c ch√®n v√†o ƒë√¢y b·∫±ng JavaScript -->
            </div>
            <div id="quiz-results" class="mt-8 p-4 bg-gray-100 rounded-lg text-center hidden">
                <p class="text-xl font-semibold text-gray-900">K·∫øt qu·∫£ c·ªßa b·∫°n:</p>
                <p class="text-3xl font-bold text-blue-600 mt-2"><span id="score-display">0</span>/7</p>
                <p id="feedback-message" class="mt-4 text-lg text-gray-700"></p>
                <div class="mt-6">
                    <h3 class="text-xl font-bold text-gray-800">K·∫øt qu·∫£ chung c·ªßa m·ªçi ng∆∞·ªùi</h3>
                    <p class="text-lg text-gray-600 mt-2">ƒêi·ªÉm trung b√¨nh c·ªßa t·∫•t c·∫£ ng∆∞·ªùi ch∆°i: <span id="average-score-display" class="font-bold text-purple-600">...</span>/7</p>
                </div>
            </div>
            <div class="text-center mt-6">
                <button id="start-quiz-btn" class="bg-blue-600 text-white px-6 py-3 rounded-full text-lg font-bold hover:bg-blue-700 transition-colors duration-300 shadow-md quiz-btn">B·∫Øt ƒë·∫ßu Quiz</button>
            </div>
        </div>
    </section>

    <!-- Ph·∫ßn T√†i li·ªáu tham kh·∫£o (References) -->
    <section id="references" class="section-container container mx-auto px-4 py-16 my-8">
        <div class="bg-white p-8 rounded-lg shadow-lg card">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">T√†i li·ªáu tham kh·∫£o</h2>
            <p class="text-gray-700 leading-relaxed text-center italic">
                (ƒêang c·∫≠p nh·∫≠t...)
            </p>
        </div>
    </section>

    <!-- Ph·∫ßn L·ªùi c·∫£m ∆°n (Acknowledgements) v√† Li√™n h·ªá -->
    <section id="acknowledgements" class="section-container container mx-auto px-4 py-16 my-8 flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-lg max-w-3xl card">
            <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">L·ªùi c·∫£m ∆°n</h2>
            <p class="text-gray-700 leading-relaxed mb-4">
                Trong su·ªët qu√° tr√¨nh t√¨m hi·ªÉu v√† th·ª±c hi·ªán ƒë·ªÅ t√†i nghi√™n c·ª©u, nh√≥m ch√∫ng em ƒë√£ nh·∫≠n ƒë∆∞·ª£c r·∫•t nhi·ªÅu s·ª± quan t√¢m, h·ªó tr·ª£ t·∫≠n t√¨nh t·ª´ c√°c th·∫ßy c√¥ v√† b·∫°n b√®. V·ªõi l√≤ng bi·∫øt ∆°n s√¢u s·∫Øc, ch√∫ng em xin g·ª≠i l·ªùi c·∫£m ∆°n ch√¢n th√†nh ƒë·∫øn:
            </p>
            <p class="text-gray-700 leading-relaxed mb-4">
                S·ªü Gi√°o d·ª•c v√† ƒê√†o t·∫°o t·ªânh An Giang ƒë√£ t·ªï ch·ª©c cu·ªôc thi nghi√™n c·ª©u khoa h·ªçc d√†nh cho h·ªçc sinh Trung h·ªçc ph·ªï th√¥ng, gi√∫p ch√∫ng em c√≥ 1 s√¢n ch∆°i √Ω nghƒ©a ƒë·ªìng th·ªùi c√≥ c∆° h·ªôi ph√°t tri·ªÉn t∆∞ duy, s√°ng t·∫°o v√† √°p d·ª•ng ki·∫øn th·ª©c v√†o th·ª±c ti·ªÖn.
            </p>
            <p class="text-gray-700 leading-relaxed mb-4">
                Ban Gi√°m hi·ªáu tr∆∞·ªùng THPT Ch√¢u Th·ªã T·∫ø ƒë√£ t·∫°o ƒëi·ªÅu ki·ªán thu·∫≠n l·ª£i cho nh√≥m trong su·ªët qu√° tr√¨nh th·ª±c hi·ªán ƒë·ªÅ t√†i. Nh√† tr∆∞·ªùng ƒë√£ h·ªó tr·ª£ tri·ªÉn khai k·∫ø ho·∫°ch m·ªôt c√°ch r√µ r√†ng, c·ª• th·ªÉ v√† lu√¥n ƒë·ªìng h√†nh c√πng ch√∫ng em trong c√°c b∆∞·ªõc ti·∫øn h√†nh nghi√™n c·ª©u, kh·∫£o s√°t t·∫°i tr∆∞·ªùng.
            </p>
            <p class="text-gray-700 leading-relaxed mb-4">
                B√™n c·∫°nh ƒë√≥, nh√≥m xin g·ª≠i l·ªùi c·∫£m ∆°n ch√¢n th√†nh ƒë·∫øn Ban Gi√°m hi·ªáu, qu√Ω th·∫ßy c√¥ v√† c√°c b·∫°n h·ªçc sinh c·ªßa c√°c tr∆∞·ªùng:
            </p>
            <ul class="list-disc list-inside space-y-1 text-gray-700 pl-4 mb-4">
                <li>Tr∆∞·ªùng THPT Chuy√™n Th·ªß Khoa Nghƒ©a</li>
                <li>Tr∆∞·ªùng THPT Ch√¢u Th·ªã T·∫ø</li>
                <li>Tr∆∞·ªùng Ph·ªï th√¥ng D√¢n t·ªôc n·ªôi tr√∫ THPT An Giang</li>
                <li>Tr∆∞·ªùng THPT Nguy·ªÖn Sinh S·∫Øc</li>
                <li>Tr∆∞·ªùng THPT Ch√¢u Phong</li>
            </ul>
            <p class="text-gray-700 leading-relaxed mb-4">
                ƒë√£ nhi·ªát t√¨nh h·ªó tr·ª£, t·∫°o ƒëi·ªÅu ki·ªán ƒë·ªÉ nh√≥m ti·∫øn h√†nh kh·∫£o s√°t v√† thu th·∫≠p s·ªë li·ªáu. S·ª± h·ª£p t√°c t√≠ch c·ª±c v√† tinh th·∫ßn c·ªüi m·ªü c·ªßa qu√Ω th·∫ßy c√¥ v√† h·ªçc sinh t·∫°i c√°c tr∆∞·ªùng l√† ngu·ªìn ƒë·ªông l·ª±c qu√Ω b√°u, gi√∫p nh√≥m c√≥ ƒë∆∞·ª£c nh·ªØng d·ªØ li·ªáu th·ª±c t·∫ø, thi·∫øt th·ª±c cho qu√° tr√¨nh nghi√™n c·ª©u.
            </p>
            <p class="text-gray-700 leading-relaxed mb-4">
                Ch√∫ng em xin tr√¢n tr·ªçng c·∫£m ∆°n qu√Ω th·∫ßy c√¥ ƒë√£ nhi·ªát t√¨nh h∆∞·ªõng d·∫´n, g√≥p √Ω cho nh√≥m trong su·ªët th·ªùi gian l√†m vi·ªác. ƒê·∫∑c bi·ªát, nh√≥m xin g·ª≠i l·ªùi tri √¢n s√¢u s·∫Øc ƒë·∫øn th·∫ßy L√™ Thanh Long ‚Äì gi√°o vi√™n gi·∫£ng d·∫°y m√¥n ƒê·ªãa L√Ω c·ªßa tr∆∞·ªùng ‚Äì ƒë√£ tr·ª±c ti·∫øp h∆∞·ªõng d·∫´n, ƒë·ªãnh h∆∞·ªõng, h·ªó tr·ª£ v√† ƒë·ªìng h√†nh c√πng nh√≥m t·ª´ nh·ªØng b∆∞·ªõc ƒë·∫ßu ti√™n ƒë·∫øn khi ho√†n thi·ªán ƒë·ªÅ t√†i. Th·∫ßy lu√¥n nhi·ªát t√¨nh gi√∫p ƒë·ª° v√† t·∫°o m·ªçi ƒëi·ªÅu ki·ªán thu·∫≠n l·ª£i cho ch√∫ng em.
            </p>
            <p class="text-gray-700 leading-relaxed mb-4">
                Ch√∫ng em c≈©ng xin c·∫£m ∆°n ƒë·∫øn gia ƒë√¨nh v√† b·∫°n b√® ‚Äì nh·ªØng ng∆∞·ªùi lu√¥n b√™n c·∫°nh, ti·∫øp th√™m ƒë·ªông l·ª±c ƒë·ªÉ ch√∫ng em v∆∞·ª£t qua nh·ªØng kh√≥ khƒÉn ‚Äì c≈©ng l√† ngu·ªìn ƒë·ªông vi√™n v√¥ c√πng qu√Ω gi√° trong su·ªët h√†nh tr√¨nh th·ª±c hi·ªán ƒë·ªÅ t√†i.
            </p>
            <p class="text-gray-700 leading-relaxed mb-4">
                M·∫∑c d√π nh√≥m ƒë√£ c·ªë g·∫Øng h·∫øt s·ª©c nh∆∞ng do h·∫°n ch·∫ø v·ªÅ kinh nghi·ªám v√† nƒÉng l·ª±c, ch·∫Øc ch·∫Øn ƒë·ªÅ t√†i v·∫´n c√≤n nhi·ªÅu thi·∫øu s√≥t. Ch√∫ng em r·∫•t mong nh·∫≠n ƒë∆∞·ª£c s·ª± th√¥ng c·∫£m v√† nh·ªØng g√≥p √Ω qu√Ω b√°u t·ª´ qu√Ω th·∫ßy c√¥ ƒë·ªÉ ho√†n thi·ªán ƒë·ªÅ t√†i t·ªët h∆°n.
            </p>
            <p class="text-center font-bold text-gray-700 mb-2">Ch√¢n th√†nh c·∫£m ∆°n !</p>
            <p class="text-center text-gray-700 mb-8">
                Ch√¢u ƒê·ªëc, ng√†y ... th√°ng ... nƒÉm 2025<br>
                Nh√≥m nghi√™n c·ª©u
            </p>
            <div class="flex flex-col items-center">
                <h3 class="text-2xl font-bold text-gray-900 mb-4">Li√™n h·ªá</h3>
                <p class="text-gray-700">
                    <span class="font-bold">Email:</span> <a href="mailto:chicong3399@gmail.com" class="text-blue-600 hover:underline">chicong3399@gmail.com</a>
                </p>
            </div>
        </div>
    </section>

    <!-- Ch√¢n trang (Footer) -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2025 [Nguy·ªÖn Ch√≠ C√¥ng]. B·∫£o l∆∞u m·ªçi quy·ªÅn.</p>
        </div>
    </footer>

    <!-- C√°c scripts -->
    <script>
        // JavaScript ƒë·ªÉ x·ª≠ l√Ω c√°c t√≠nh nƒÉng t∆∞∆°ng t√°c

        // Logic cu·ªôn m∆∞·ª£t m√†
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        // Logic ·∫©n banner th√¥ng b√°o
        document.getElementById('dismiss-banner-btn').addEventListener('click', () => {
            document.getElementById('trial-banner').style.display = 'none';
        });

        // ===================================
        // 1. Logic cho Chart.js (K·∫øt qu·∫£ Kh·∫£o s√°t)
        // ===================================
        document.addEventListener('DOMContentLoaded', () => {
            // D·ªØ li·ªáu bi·ªÉu ƒë·ªì ƒë∆∞·ª£c ƒë·∫∑t v·ªÅ 0 theo y√™u c·∫ßu, s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t sau
            const mockSurveyData = {
                visualImpact: {
                    labels: ['M√†u s·∫Øc', 'H√¨nh ·∫£nh', 'Font ch·ªØ', 'Thi·∫øt k·∫ø bao b√¨'],
                    data: [0, 0, 0, 0], 
                    backgroundColor: ['#ef4444', '#f97316', '#eab308', '#22c55e']
                },
                marketingMessages: {
                    labels: ['Qu·∫£ng c√°o TikTok', 'Influencers', 'Gi·∫£m gi√°', 'Khuy·∫øn m√£i'],
                    data: [0, 0, 0, 0], 
                    backgroundColor: ['#3b82f6', '#8b5cf6', '#ec4899', '#f43f5e']
                }
            };

            const visualImpactCtx = document.getElementById('visualImpactChart');
            if (visualImpactCtx) {
                new Chart(visualImpactCtx, {
                    type: 'bar',
                    data: {
                        labels: mockSurveyData.visualImpact.labels,
                        datasets: [{
                            label: 'M·ª©c ƒë·ªô ·∫£nh h∆∞·ªüng (%)',
                            data: mockSurveyData.visualImpact.data,
                            backgroundColor: mockSurveyData.visualImpact.backgroundColor,
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                title: {
                                    display: true,
                                    text: 'Ph·∫ßn trƒÉm'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(tooltipItem) {
                                        return `${tooltipItem.label}: ${tooltipItem.raw}%`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            const marketingMessageCtx = document.getElementById('marketingMessageChart');
            if (marketingMessageCtx) {
                new Chart(marketingMessageCtx, {
                    type: 'doughnut',
                    data: {
                        labels: mockSurveyData.marketingMessages.labels,
                        datasets: [{
                            label: 'Ph·∫ßn trƒÉm h·ªçc sinh b·ªã ·∫£nh h∆∞·ªüng',
                            data: mockSurveyData.marketingMessages.data,
                            backgroundColor: mockSurveyData.marketingMessages.backgroundColor,
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                        }
                    }
                });
            }
        });
        
        // ===================================
        // 2. Logic cho Quiz v√† Firestore
        // ===================================
        let db, auth, userId;
        const quizCollectionId = 'quizResults';
        const firebaseConfig = {
  apiKey: "AIzaSyDqkucpWa1qEPCHWWvxf_ES-mXGc7SZlqk",
  authDomain: "nckhsmartpick.firebaseapp.com",
  projectId: "nckhsmartpick",
  storageBucket: "nckhsmartpick.firebasestorage.app",
  messagingSenderId: "728228169912",
  appId: "1:728228169912:web:559c1b4e46f784b90c4c4d",
  measurementId: "G-T0NN9DM2T3"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

        const quizQuestions = [
            { question: "1. Y·∫øu t·ªë n√†o ·∫£nh h∆∞·ªüng nhi·ªÅu nh·∫•t ƒë·∫øn quy·∫øt ƒë·ªãnh mua s·∫Øm c·ªßa Gen Z?", options: ["Gi√° c·∫£", "Ch·∫•t l∆∞·ª£ng", "Ng∆∞·ªùi ·∫£nh h∆∞·ªüng (Influencers)", "M·∫´u m√£"], answer: "Ng∆∞·ªùi ·∫£nh h∆∞·ªüng (Influencers)" },
            { question: "2. N·ªÅn t·∫£ng m·∫°ng x√£ h·ªôi n√†o Gen Z s·ª≠ d·ª•ng nhi·ªÅu nh·∫•t ƒë·ªÉ t√¨m ki·∫øm s·∫£n ph·∫©m?", options: ["Facebook", "TikTok", "Instagram", "Zalo"], answer: "TikTok" },
            { question: "3. Gen Z th∆∞·ªùng t√¨m ki·∫øm th√¥ng tin v·ªÅ s·∫£n ph·∫©m ·ªü ƒë√¢u?", options: ["B√°o ch√≠ truy·ªÅn th·ªëng", "Truy·ªÅn h√¨nh", "Video review tr√™n YouTube/TikTok", "B·∫°n b√®"], answer: "Video review tr√™n YouTube/TikTok" },
            { question: "4. ƒêi·ªÅu g√¨ khi·∫øn Gen Z trung th√†nh v·ªõi m·ªôt th∆∞∆°ng hi·ªáu?", options: ["Gi√° r·∫ª", "∆Øu ƒë√£i", "T√≠nh b·ªÅn v·ªØng v√† gi√° tr·ªã x√£ h·ªôi", "Qu·∫£ng c√°o nhi·ªÅu"], answer: "T√≠nh b·ªÅn v·ªØng v√† gi√° tr·ªã x√£ h·ªôi" },
            { question: "5. Gen Z th∆∞·ªùng mua s·∫Øm qua h√¨nh th·ª©c n√†o nhi·ªÅu nh·∫•t?", options: ["C·ª≠a h√†ng truy·ªÅn th·ªëng", "S√†n th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠", "Mua tr·ª±c ti·∫øp qua m·∫°ng x√£ h·ªôi", "Mua qua TV"], answer: "S√†n th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠" },
            { question: "6. FOMO trong ti√™u d√πng l√† g√¨?", options: ["Mua h√†ng gi·∫£m gi√°", "Mua h√†ng theo tr√†o l∆∞u v√¨ s·ª£ b·ªè l·ª°", "Mua s·∫Øm ti·∫øt ki·ªám", "Mua h√†ng xa x·ªâ"], answer: "Mua h√†ng theo tr√†o l∆∞u v√¨ s·ª£ b·ªè l·ª°" },
            { question: "7. H√†nh vi 'sƒÉn' c√°c m√£ gi·∫£m gi√°, voucher ph·ªï bi·∫øn ·ªü Gen Z th·ªÉ hi·ªán ƒëi·ªÅu g√¨?", options: ["Kh√¥ng c√≥ ti·ªÅn", "Th√¥ng minh t√†i ch√≠nh", "√çt mua s·∫Øm", "Th√≠ch l√£ng ph√≠"], answer: "Th√¥ng minh t√†i ch√≠nh" }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const quizResults = document.getElementById('quiz-results');
        const scoreDisplay = document.getElementById('score-display');
        const feedbackMessage = document.getElementById('feedback-message');
        const averageScoreDisplay = document.getElementById('average-score-display');
        const userIdDisplay = document.getElementById('user-id-display');
        const userInfoDiv = document.getElementById('user-info');
        
        let currentQuestionIndex = 0;
        let score = 0;
        let isAuthReady = false;

        async function initFirebaseAndAuth() {
            if (Object.keys(firebaseConfig).length === 0) {
                 console.error("Firebase config is missing. Cannot initialize Firestore.");
                 return;
            }
            try {
                const firebase = window.firebase;
                const app = firebase.initializeApp(firebaseConfig);
                db = firebase.getFirestore(app);
                auth = firebase.getAuth(app);
                
                if (initialAuthToken) {
                    await firebase.signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await firebase.signInAnonymously(auth);
                }
                
                auth.onAuthStateChanged(user => {
                    if (user) {
                        userId = user.uid;
                        userIdDisplay.textContent = userId;
                        userInfoDiv.classList.remove('hidden');
                        isAuthReady = true;
                        console.log("Firebase ƒë√£ s·∫µn s√†ng. ID ng∆∞·ªùi d√πng:", userId);
                    } else {
                        console.log("Ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng nh·∫≠p. S·∫Ω s·ª≠ d·ª•ng ID ·∫©n danh.");
                        userId = crypto.randomUUID();
                        userIdDisplay.textContent = userId;
                        userInfoDiv.classList.remove('hidden');
                        isAuthReady = true;
                    }
                });
            } catch (error) {
                console.error("L·ªói kh·ªüi t·∫°o Firebase:", error);
            }
        }

        function renderQuestion(index) {
            quizContainer.innerHTML = '';
            const q = quizQuestions[index];
            const questionElement = document.createElement('div');
            questionElement.className = 'bg-gray-50 p-6 rounded-lg shadow-inner';
            questionElement.innerHTML = `
                <p class="text-lg font-semibold text-gray-800 mb-4">${q.question}</p>
                <div class="space-y-3">
                    ${q.options.map(option => `
                        <label class="flex items-center space-x-3 p-3 bg-white rounded-lg shadow-sm hover:bg-blue-50 cursor-pointer transition-colors duration-200">
                            <input type="radio" name="quiz-option" value="${option}" class="form-radio h-5 w-5 text-blue-600">
                            <span class="text-gray-700">${option}</span>
                        </label>
                    `).join('')}
                </div>
                <p id="question-feedback" class="mt-4 text-center font-bold"></p>
                <div class="mt-6 text-center">
                    <button id="action-btn" class="bg-blue-600 text-white px-6 py-3 rounded-full text-lg font-bold hover:bg-blue-700 transition-colors duration-300 shadow-md quiz-btn">
                        Ki·ªÉm tra ƒë√°p √°n
                    </button>
                </div>
            `;
            quizContainer.appendChild(questionElement);

            const actionBtn = document.getElementById('action-btn');
            actionBtn.addEventListener('click', () => {
                const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
                const feedbackElement = document.getElementById('question-feedback');

                if (actionBtn.textContent === "Ki·ªÉm tra ƒë√°p √°n") {
                    if (selectedOption) {
                        const isCorrect = selectedOption.value === q.answer;
                        if (isCorrect) {
                            score++;
                            feedbackElement.textContent = "ƒê√∫ng r·ªìi! üéâ";
                            feedbackElement.classList.remove('text-red-600');
                            feedbackElement.classList.add('text-green-600');
                        } else {
                            feedbackElement.innerHTML = `Sai r·ªìi. ƒê√°p √°n ƒë√∫ng l√†: <span class="text-green-600">${q.answer}</span>`;
                            feedbackElement.classList.remove('text-green-600');
                            feedbackElement.classList.add('text-red-600');
                        }
                        
                        document.querySelectorAll('input[name="quiz-option"]').forEach(radio => radio.disabled = true);
                        actionBtn.textContent = "Ti·∫øp theo";
                    }
                } else {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < quizQuestions.length) {
                        renderQuestion(currentQuestionIndex);
                    } else {
                        showResults();
                    }
                }
            });
        }

        async function saveResultToFirestore() {
            if (!isAuthReady) {
                console.error("Firebase ch∆∞a s·∫µn s√†ng.");
                return;
            }
            try {
                const firebase = window.firebase;
                const path = `/artifacts/${appId}/public/data/${quizCollectionId}`;
                await firebase.addDoc(firebase.collection(db, path), {
                    userId: userId,
                    score: score,
                    timestamp: firebase.serverTimestamp ? firebase.serverTimestamp() : new Date()
                });
                console.log("ƒê√£ l∆∞u k·∫øt qu·∫£ quiz v√†o Firestore.");
            } catch (e) {
                console.error("L·ªói khi l∆∞u k·∫øt qu·∫£ quiz:", e);
            }
        }
        
        async function fetchAverageScore() {
            if (!isAuthReady) return;
            try {
                const firebase = window.firebase;
                const path = `/artifacts/${appId}/public/data/${quizCollectionId}`;
                const querySnapshot = await firebase.getDocs(firebase.collection(db, path));
                
                let totalScore = 0;
                let playerCount = 0;
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    if (typeof data.score === 'number') {
                        totalScore += data.score;
                        playerCount++;
                    }
                });

                if (playerCount > 0) {
                    const averageScore = (totalScore / playerCount).toFixed(1);
                    averageScoreDisplay.textContent = averageScore;
                } else {
                    averageScoreDisplay.textContent = "Ch∆∞a c√≥ d·ªØ li·ªáu";
                }
            } catch (e) {
                console.error("L·ªói khi l·∫•y ƒëi·ªÉm trung b√¨nh:", e);
            }
        }

        function showResults() {
            quizContainer.classList.add('hidden');
            quizResults.classList.remove('hidden');
            scoreDisplay.textContent = score;

            if (score >= 6) {
                feedbackMessage.textContent = "B·∫°n l√† m·ªôt Gen Z c√≥ ki·∫øn th·ª©c ti√™u d√πng si√™u ƒë·ªânh! üéâ";
                feedbackMessage.classList.remove('text-red-700', 'text-yellow-700');
                feedbackMessage.classList.add('text-green-700', 'font-extrabold');
            } else if (score >= 4) {
                feedbackMessage.textContent = "B·∫°n kh√° hi·ªÉu v·ªÅ th·ªã tr∆∞·ªùng ƒë·∫•y! üí° H√£y kh√°m ph√° th√™m m·ªôt ch√∫t n·ªØa ƒë·ªÉ tr·ªü th√†nh chuy√™n gia nh√©.";
                feedbackMessage.classList.remove('text-red-700', 'text-green-700', 'font-extrabold');
                feedbackMessage.classList.add('text-yellow-700');
            } else {
                feedbackMessage.textContent = "ƒê·ª´ng n·∫£n l√≤ng! üòâ V·∫´n c√≤n nhi·ªÅu ƒëi·ªÅu th√∫ v·ªã ƒë·ªÉ kh√°m ph√°. C√πng ƒë·ªçc c·∫©m nang v√† th·ª≠ l·∫°i nh√©!";
                feedbackMessage.classList.remove('text-green-700', 'text-yellow-700', 'font-extrabold');
                feedbackMessage.classList.add('text-red-700');
            }
            
            saveResultToFirestore();
            fetchAverageScore();
        }

        startQuizBtn.addEventListener('click', () => {
            startQuizBtn.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            renderQuestion(currentQuestionIndex);
        });

        // Kh·ªüi t·∫°o Firebase khi trang t·∫£i xong
        document.addEventListener('DOMContentLoaded', initFirebaseAndAuth);


        // ===================================
        // 3. Logic cho hi·ªáu ·ª©ng cu·ªôn
        // ===================================
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target); // Ng·ª´ng quan s√°t sau khi ƒë√£ hi·ªán
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.card').forEach(card => {
            observer.observe(card);
        });

    </script>
    
    <!-- Scripts cho m√¥ h√¨nh 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        // Khai b√°o c√°c bi·∫øn global cho m√¥ h√¨nh 3D
        let scene, camera, renderer, can, controls;

        // H√†m kh·ªüi t·∫°o Three.js
        function init3D() {
            const container = document.getElementById('threed-container');

            // 1. T·∫°o Scene (Kh√¥ng gian 3D)
            scene = new THREE.Scene();

            // 2. T·∫°o Camera (G√≥c nh√¨n)
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 2.5;

            // 3. T·∫°o Renderer (B·ªô d·ª±ng h√¨nh)
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);

            // 4. T·∫°o ƒë·ªëi t∆∞·ª£ng 3D (Lon n∆∞·ªõc d·ª´a)
            // T·∫°o canvas ƒë·ªÉ v·∫Ω texture cho lon n∆∞·ªõc
            const canvasTexture = document.createElement('canvas');
            canvasTexture.width = 1024;
            canvasTexture.height = 1024;
            const ctx = canvasTexture.getContext('2d');
            
            // --- Thi·∫øt k·∫ø texture m·ªõi cho lon n∆∞·ªõc d·ª´a v·ªõi ƒë·∫ßy ƒë·ªß th√¥ng tin (c·∫≠p nh·∫≠t) ---
            
            // M√†u n·ªÅn: Tr·∫Øng ho√†n to√†n ƒë·ªÉ t·∫°o c·∫£m gi√°c tinh khi·∫øt
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(0, 0, 1024, 1024);

            // V·∫Ω m·ªôt d·∫£i s√≥ng m√†u xanh ng·ªçc lam nh·∫π nh√†ng ·ªü ƒë√°y lon
            ctx.fillStyle = 'rgba(0, 206, 209, 0.4)'; // M√†u xanh ng·ªçc lam nh·∫°t
            ctx.beginPath();
            ctx.moveTo(0, 700);
            ctx.bezierCurveTo(256, 650, 768, 750, 1024, 700);
            ctx.lineTo(1024, 1024);
            ctx.lineTo(0, 1024);
            ctx.closePath();
            ctx.fill();

            // Logo v√† t√™n s·∫£n ph·∫©m
            ctx.fillStyle = '#006400'; // M√†u xanh l√° c√¢y ƒë·∫≠m
            ctx.font = 'bold 90px Poppins';
            ctx.textAlign = 'center';
            ctx.fillText('Coconut Bliss', canvasTexture.width / 2, 490);
            
            ctx.fillStyle = '#4B5563'; // M√†u x√°m ƒë·∫≠m
            ctx.font = '600 40px Poppins';
            ctx.fillText('100% N∆∞·ªõc D·ª´a T∆∞∆°i', canvasTexture.width / 2, 570);
            
            ctx.font = '400 35px Poppins';
            ctx.fillText('S·∫£ng Kho√°i T·ª± Nhi√™n', canvasTexture.width / 2, 620);
            
            // Logo d·ª´a SVG
            const coconutSvg = `
                <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 24 24" fill="none" stroke="#008000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M7 9c1-4 5-5.5 8-2-.7 4-2.9 5.7-4 9.4-1.5 2.4-2.1 3.7-2 5.6.3 2.5-1 4.7-3 5.4-1.5-.7-3.2-1.3-4.5-3.3-.7-1.1-1.5-2.4-2-4.7-.5-2.4.7-4.5 1.9-6.4-.1-.7-.4-1.3-.9-2-.6-.8-1.5-1.4-2.4-1.8-.8-.4-1.7-.5-2.6-.2-.9.3-1.6 1-1.9 1.9-.2.8-.1 1.6.3 2.4-1.1-.5-2.7-.1-4.4 1.4-5.5 4.6-6.9 5.7-9.9 7.2l-1.2-.5c2.5-2.2 5.8-3.8 8.9-7.8z"/>
                </svg>
            `;
            const img = new Image();
            img.onload = () => {
                const imgSize = 200;
                ctx.drawImage(img, (1024 - imgSize) / 2, 200, imgSize, imgSize);
                updateCanTexture();
            };
            img.src = 'data:image/svg+xml;base64,' + btoa(coconutSvg);

            // B·ªï sung th√¥ng tin s·∫£n ph·∫©m ·ªü m·∫∑t sau v√† b√™n h√¥ng
            // N∆°i s·∫£n xu·∫•t
            ctx.fillStyle = '#4B5563'; // M√†u x√°m ƒë·∫≠m
            ctx.font = '400 30px Poppins';
            ctx.textAlign = 'left';
            ctx.fillText('S·∫£n xu·∫•t t·∫°i:', 840, 300);
            ctx.font = '400 25px Poppins';
            ctx.fillText('C√¥ng ty TNHH N∆∞·ªõc Gi·∫£i Kh√°t', 840, 340);
            ctx.fillText('Ch√¢u ƒê·ªëc, An Giang, Vi·ªát Nam', 840, 370);

            // Th√†nh ph·∫ßn
            ctx.font = 'bold 30px Poppins';
            ctx.fillText('TH√ÄNH PH·∫¶N:', 840, 450);
            ctx.font = '400 25px Poppins';
            ctx.fillText('- N∆∞·ªõc d·ª´a t∆∞∆°i (99%)', 840, 490);
            ctx.fillText('- ƒê∆∞·ªùng (1%)', 840, 520);
            ctx.fillText('- Ch·∫•t b·∫£o qu·∫£n t·ª± nhi√™n', 840, 550);
            ctx.fillText('H·∫°n s·ª≠ d·ª•ng: 12 th√°ng', 840, 600);

            // M√£ v·∫°ch
            ctx.fillStyle = 'black';
            ctx.fillRect(850, 700, 10, 100);
            ctx.fillRect(865, 700, 5, 100);
            ctx.fillRect(875, 700, 10, 100);
            ctx.fillRect(890, 700, 5, 100);
            ctx.fillRect(900, 700, 10, 100);
            ctx.fillRect(915, 700, 10, 100);
            ctx.fillRect(930, 700, 5, 100);
            ctx.fillRect(940, 700, 10, 100);

            const texture = new THREE.CanvasTexture(canvasTexture);
            const material = new THREE.MeshLambertMaterial({ map: texture });
            
            // S·ª≠ d·ª•ng CylinderGeometry cho lon
            const canHeight = 2.2;
            const canRadius = 0.8;
            const canTopRadius = 0.75;
            const canTopThickness = 0.1;
            
            const canBodyGeometry = new THREE.CylinderGeometry(canRadius, canRadius, canHeight, 64);
            const canTopGeometry = new THREE.CylinderGeometry(canTopRadius, canRadius, canTopThickness, 64);
            const canLidGeometry = new THREE.CylinderGeometry(canTopRadius, canTopRadius, canTopThickness / 2, 64);
            
            const canBody = new THREE.Mesh(canBodyGeometry, material);
            const canTop = new THREE.Mesh(canTopGeometry, new THREE.MeshLambertMaterial({color: 0xc0c0c0}));
            const canLid = new THREE.Mesh(canLidGeometry, new THREE.MeshLambertMaterial({color: 0xa0a0a0}));

            canTop.position.y = canHeight / 2;
            canLid.position.y = canHeight / 2 + canTopThickness / 2;
            
            can = new THREE.Group();
            can.add(canBody);
            can.add(canTop);
            can.add(canLid);
            
            scene.add(can);
            
            // 5. Th√™m √°nh s√°ng
            const hemisphereLight = new THREE.HemisphereLight(0xffffff, 0x444444, 0.8);
            scene.add(hemisphereLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
            directionalLight.position.set(5, 10, 7.5);
            scene.add(directionalLight);

            // 6. Th√™m Controls ƒë·ªÉ xoay m√¥ h√¨nh
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.rotateSpeed = 0.5;
            controls.maxPolarAngle = Math.PI / 2;

            // X·ª≠ l√Ω s·ª± ki·ªán khi thay ƒë·ªïi k√≠ch th∆∞·ªõc c·ª≠a s·ªï
            window.addEventListener('resize', onWindowResize, false);
        }

        function updateCanTexture() {
            // C·∫≠p nh·∫≠t l·∫°i texture sau khi h√¨nh ·∫£nh d·ª´a ƒë∆∞·ª£c t·∫£i
            if (can && can.children.length > 0) {
                const bodyMesh = can.children[0];
                if (bodyMesh) {
                    bodyMesh.material.map.needsUpdate = true;
                }
            }
        }

        // H√†m x·ª≠ l√Ω khi thay ƒë·ªïi k√≠ch th∆∞·ªõc c·ª≠a s·ªï
        function onWindowResize() {
            const container = document.getElementById('threed-container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }

        // V√≤ng l·∫∑p ch√≠nh ƒë·ªÉ render scene
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        // Ch·ªù trang t·∫£i xong th√¨ kh·ªüi t·∫°o v√† ch·∫°y
        window.onload = function() {
            // Kh·ªüi t·∫°o c√°c script c·ªßa trang web
            const event = new Event('DOMContentLoaded');
            document.dispatchEvent(event);

            // Kh·ªüi t·∫°o v√† ch·∫°y m√¥ h√¨nh 3D
            init3D();
            animate();
        };
    </script>

</body>
</html>
